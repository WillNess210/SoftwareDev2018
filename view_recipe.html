<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
	<script src="js/main.js"> </script>
    <title>Title TBD</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
  </head>

  <body>

    <nav id = "nav">
	
	</nav>
	
    <div class="container">

      <div class="recipe-template">
		<p> rid:
		<script type="text/javascript">
			document.write(getAllUrlParams().rid);
		</script>
		</p>
		<p class = "lead recipe-item" id = "usernameholder">By: (USERNAME)</p>
        <h1 class = "recipe-title" id = "recipe-title">Recipe Name Here</h1>
		<p class="lead recipe-title" id = "recipe-category">(CATEGORY) </p>
		<h2 class = "recipe-title"> Ingredients </h2>
		<div id = "ingredients">
		</div>
		<h2 class = "recipe-title"> Steps </h2>
		<div id = "steps">
		</div>
      </div>
	<hr>

      <footer>
        <p>&copy; Let's Code Djibouti </p>
      </footer>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	<script src="http://code.jquery.com/jquery-2.2.1.js"></script>
    <script>window.jQuery || document.write('<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"><\/script>')</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
	<script>
	var JsonString = "{\"id\":6, \"owner_id\": 0, \"name\": \"Nothing Quiche\", \"category\": 2, \"public\": false, \"steps\": [\"Step 1\", \"Do Nothing\"]}";
	var url = "http://djibouti-recipe.herokuapp.com/api/recipes/10";
	$( document ).ready(function() {
		$('#nav').load('predone/navbar.html');
		$.getJSON(url, function( data ) {
			console.log("yoyo");
			console.log(data);
			JsonString = data;
		}).then(function(){
			//var JSONSTRING = JSON.parse(JsonString['0']);
			var JSONSTRING = JsonString['0'];
			var test = Object.values(JSON.parse(JSONSTRING.steps));
			console.log(JSONSTRING.name);
			$("#recipe-title").html(JSONSTRING.name);
			$("#recipe-category").html(JSONSTRING.category);
			$("#usernameholder").html("By: " + JSONSTRING.owner_id); // TODO lookup username using owner_id
			test.forEach(addSteps);
			//JSON.ingredients.forEach(addIngredients);
			function addSteps(value, index, array){
				var text = "<p class = \"lead recipe-item\"> " + (index + 1) + ". " + value + "</p>";
				$("#steps").append(text);
			}
			function addIngredients(value, index, array){
				var text = "<p class = \"lead recipe-item\"> " + value + "</p>";
				$("#ingredients").append(text);
			}
		});
		
		
	});
	//$("#").html();
	</script>
  </body>
</html>
